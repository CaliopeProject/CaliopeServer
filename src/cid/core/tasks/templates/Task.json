{
    "name": "Tasks",
    "html": [
        {
            "name": "title",
            "type": "div",
            "html": [
                {
                    "type": "h1",
                    "html": "Tarea"
                }
            ]
        },
        {
            "name": "empty",
            "type": "span"
        },
        {
            "name": "category",
            "caption": "Categoria",
            "type": "text",
            "class": "input-large",
            "readonly" : true,
            "relation": {
                "rel_name" : "holders",
                "class": "CaliopeUser",
                "target" : "{{holders}}",
                "properties" : {
                  "category" : "{{category}}"
                }
              }
        },
        {
            "name": "execute",
            "type": "execute-task",
            "options": {
                "target-uuid-field": "target",
                "target-entity-field": "formtask"
            }
        },
        {
            "name": "target",
            "type": "hidden",
            "relation": {
              "rel_name" : "target",
              "target" : "{{target}}",
              "properties" : {
              }
            }
        },
        {
            "name": "subtasks",
            "type": "hidden"
        },
        {
            "name": "comments",
            "type": "hidden"
        },
        {
            "name": "formtask",
            "caption": "Formulario",
            "class": "input-large",
            "type": "select",
            "options-load-server": {
                "method": "form.getForms",
                "field-value": "formId",
                "field-desc": "label"
            },
            "validation": {
                "required": true
            },
            "options": {
                "predios": "Selección de Predios",
                "projects": "Formulario de proyectos"
            }
        },
        {
            "name": "holders",
            "caption": "Asignar a",
            "class": "input-large",
            "type": "multi-choices",
            "options-load-server": {
                "method": "accounts.getAll",
                "field-value": "uuid",
                "field-desc": "username",
                "field-image": "image"
            },
            "relation": {
                "rel_name" : "holders",
                "class": "CaliopeUser",
                "target" : "{{holders}}",
                "properties" : {
                  "category" : "{{category}}"
                }
            }
        },
        {
            "name": "status",
            "caption": "Estado",
            "class": "input-large",
            "type": "multi-choices",
            "single": "true",
            "options-load-server": {
                "method": "accounts.getAll",
                "field-value": "estado",
                "field-desc": "desc",
                "field-image": "image"
            }
        },
        {
            "name": "name",
            "caption": "Nombre",
            "class": "input-large",
            "type": "text",
            "validations": {
                "required": true
            }
        },
        {
            "name": "description",
            "caption": "Descripción tarea",
            "class": "input-large",
            "type": "textarea",
            "rows": "5",
            "cols": "70"
        },
        {
            "name": "deadline",
            "class": "input-large",
            "caption": "Fecha estimada de finalización",
            "type": "datepicker",
            "format": "dd/MM/yyyy"
        }
    ],
    "actions": [
        {
            "name": "Confirmar",
            "method": "tasks.commit",
            "params-to-send" : "uuid",
            "encapsulate-in-data" : "false"
        }
    ],
    "layout": [
        {
            "columns": [
                {
                    "class": "page-header span3",
                    "elements": ["title"]
                },
                {
                    "class": "page-header span8",
                    "elements": ["execute"]
                },
                {
                    "class": "span1",
                    "elements": ["target"]
                }
            ]
        },
        {
            "class": "span12",
            "columns": [
                {
                    "class": "span6",
                    "elements": ["name" , "description", "category", "comments", "subtasks"]
                },
                {
                    "class": "span6",
                    "elements": ["formtask", "deadline", "holders", "target", "status"]
                }
            ]
        }
    ]
}
